(()=>{"use strict";var t;!function(t){t.Active="active",t.Finished="finished"}(t||(t={}));var e=function(t,e,n,r,o){this.id=t,this.title=e,this.description=n,this.people=r,this.status=o};const n=function(){function t(t,e,n,r){this.templateElement=document.getElementById(t),this.hostElement=document.getElementById(e),this.hostPosition=n;var o=document.importNode(this.templateElement.content,!0);this.element=o.firstElementChild,r&&(this.element.id=r),this.attach()}return t.prototype.attach=function(){this.hostElement.insertAdjacentElement(this.hostPosition,this.element)},t}();function r(t,e,n){return{configurable:!0,enumerable:!1,get:function(){return n.value.bind(this)}}}function o(t){return!(t.required&&0===t.value.toString().trim().length||null!=t.minLength&&"string"==typeof t.value&&t.value.trim().length<t.minLength||null!=t.maxLength&&"string"==typeof t.value&&t.value.trim().length>t.maxLength||null!=t.minVal&&"number"==typeof t.value&&t.value<t.minVal||null!=t.maxVal&&"number"==typeof t.value&&t.value>t.maxVal)}var i,a=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(n){function r(){var t=n.call(this)||this;return t.projects=[],t}return a(r,n),r.getInstance=function(){return this.instance||(this.instance=new r),this.instance},r.prototype.addProject=function(n,r,o,i){var a=new e(Math.random().toString(),n,r,o,i||t.Active);this.projects.push(a),this.publishChanges()},r.prototype.publishChanges=function(){for(var t=0,e=this.listeners;t<e.length;t++)(0,e[t])(this.projects.slice())},r.prototype.updateProjectStatus=function(t,e){var n=this.projects.find((function(e){return e.id===t}));n&&n.status!==e&&(n.status=e,this.publishChanges())},r}(function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){this.listeners.push(t)},t}()).getInstance(),c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t){function e(){var e=t.call(this,"project-input","app","afterbegin","user-input")||this;return e.titleInput=e.element.querySelector("#title"),e.descriptionInput=e.element.querySelector("#description"),e.peopleInput=e.element.querySelector("#people"),e.configure(),e}return c(e,t),e.prototype.renderContent=function(){},e.prototype.configure=function(){this.element.addEventListener("submit",this.submitHandler)},e.prototype.submitHandler=function(t){t.preventDefault();var e=this.gatherInputData();if(e){var n=e[0],r=e[1],o=e[2];s.addProject(n,r,o),this.resetForm()}},e.prototype.gatherInputData=function(){var t=this.titleInput.value,e=this.descriptionInput.value,n=this.peopleInput.value;if(o({value:t,required:!0})&&o({value:e,required:!0})&&o({value:+n,minVal:1,maxVal:10}))return[t,e,+n];alert("Invalid project. Please try again")},e.prototype.resetForm=function(){this.titleInput.value="",this.descriptionInput.value="",this.peopleInput.value=""},function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);i>3&&a&&Object.defineProperty(e,n,a)}([r],e.prototype,"submitHandler",null),e}(n),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(e,n){var r=t.call(this,"single-project",e,"beforeend")||this;return r.project=n,r.renderContent(),r.configure(),r}return l(e,t),Object.defineProperty(e.prototype,"contributors",{get:function(){return this.project.people+" contributor"+(1===this.project.people?"":"s")},enumerable:!1,configurable:!0}),e.prototype.configure=function(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)},e.prototype.renderContent=function(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.contributors,this.element.querySelector("p").textContent=this.project.description},e.prototype.dragStartHandler=function(t){t.dataTransfer.setData("text/plain",this.project.id),t.dataTransfer.effectAllowed="move"},e.prototype.dragEndHandler=function(t){},function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);i>3&&a&&Object.defineProperty(e,n,a)}([r],e.prototype,"dragStartHandler",null),e}(n),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},h=function(t){function e(e){var n=t.call(this,"project-list","app","beforeend",e+"-projects")||this;return n.status=e,n.assignedProjects=[],n.renderContent(),n.configure(),n}return f(e,t),e.prototype.configure=function(){s.addListener(this.handleProjectAdded),this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler)},e.prototype.renderContent=function(){var t=this.status+"-projects-list";this.element.querySelector("ul").id=t;var e=this.status.toUpperCase()+" PROJECTS";this.element.querySelector("h2").textContent=e},e.prototype.handleProjectAdded=function(t){var e=this;this.assignedProjects=t.filter((function(t){return t.status===e.status})),this.renderProjects()},e.prototype.renderProjects=function(){var t=this.status+"-projects-list";document.getElementById(t).innerHTML="";for(var e=0,n=this.assignedProjects;e<n.length;e++){var r=n[e];new p(t,r)}},e.prototype.dragOverHandler=function(t){t.dataTransfer&&"text/plain"===t.dataTransfer.types[0]&&(t.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))},e.prototype.dropHandler=function(t){t.preventDefault();var e=t.dataTransfer.getData("text/plain");s.updateProjectStatus(e,this.status)},e.prototype.dragLeaveHandler=function(t){this.element.querySelector("ul").classList.remove("droppable")},d([r],e.prototype,"handleProjectAdded",null),d([r],e.prototype,"dragOverHandler",null),d([r],e.prototype,"dropHandler",null),d([r],e.prototype,"dragLeaveHandler",null),e}(n);new u,new h(t.Active),new h(t.Finished)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy9tb2RlbHMvcHJvamVjdC50cyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy9jb21wb25lbnRzL2Jhc2UudHMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9zcmMvZGVjb3JhdG9ycy9hdXRvYmluZC50cyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy91dGlsL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9zcmMvc3RhdGUvcHJvamVjdC1tYW5hZ2VtZW50LnRzIiwid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1mb3JtLnRzIiwid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pdGVtLnRzIiwid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1saXN0LnRzIiwid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL2FwcC50cyJdLCJuYW1lcyI6WyJQcm9qZWN0U3RhdHVzIiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicGVvcGxlIiwic3RhdHVzIiwidGVtcGxhdGVFbElkIiwiaG9zdEVsSWQiLCJob3N0UG9zaXRpb24iLCJuZXdFbElkIiwidGhpcyIsInRlbXBsYXRlRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJob3N0RWxlbWVudCIsIm5ld05vZGUiLCJpbXBvcnROb2RlIiwiY29udGVudCIsImVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImF0dGFjaCIsImluc2VydEFkamFjZW50RWxlbWVudCIsIkF1dG9iaW5kIiwiX3RhcmdldCIsIl9tZXRob2ROYW1lIiwiZGVzY3JpcHRvciIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJ2YWx1ZSIsImJpbmQiLCJ2YWxpZGF0ZSIsImlucHV0VmFsIiwicmVxdWlyZWQiLCJ0b1N0cmluZyIsInRyaW0iLCJsZW5ndGgiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJtaW5WYWwiLCJtYXhWYWwiLCJwcm9qZWN0TWFuYWdlciIsInByb2plY3RzIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsIlByb2plY3RNYW5hZ2VyIiwiYWRkUHJvamVjdCIsImRlc2MiLCJuZXdQcm9qZWN0IiwiUHJvamVjdCIsIk1hdGgiLCJyYW5kb20iLCJBY3RpdmUiLCJwdXNoIiwicHVibGlzaENoYW5nZXMiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lckZuIiwic2xpY2UiLCJ1cGRhdGVQcm9qZWN0U3RhdHVzIiwicHJvamVjdElkIiwibmV3U3RhdHVzIiwicHJvamVjdCIsImZpbmQiLCJwIiwiYWRkTGlzdGVuZXIiLCJ0aXRsZUlucHV0IiwicXVlcnlTZWxlY3RvciIsImRlc2NyaXB0aW9uSW5wdXQiLCJwZW9wbGVJbnB1dCIsImNvbmZpZ3VyZSIsInJlbmRlckNvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic3VibWl0SGFuZGxlciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJmb3JtRGF0YSIsImdhdGhlcklucHV0RGF0YSIsInJlc2V0Rm9ybSIsIm5ld1RpdGxlIiwibmV3RGVzYyIsIm5ld1Blb3BsZSIsImFsZXJ0IiwiZHJhZ1N0YXJ0SGFuZGxlciIsImRyYWdFbmRIYW5kbGVyIiwidGV4dENvbnRlbnQiLCJjb250cmlidXRvcnMiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZWZmZWN0QWxsb3dlZCIsIl9ldmVudCIsImFzc2lnbmVkUHJvamVjdHMiLCJoYW5kbGVQcm9qZWN0QWRkZWQiLCJkcmFnT3ZlckhhbmRsZXIiLCJkcmFnTGVhdmVIYW5kbGVyIiwiZHJvcEhhbmRsZXIiLCJsaXN0SWQiLCJ0aXRsZVRleHQiLCJ0b1VwcGVyQ2FzZSIsImZpbHRlciIsInJlbmRlclByb2plY3RzIiwiaW5uZXJIVE1MIiwiUHJvamVjdEl0ZW0iLCJ0eXBlcyIsImNsYXNzTGlzdCIsImFkZCIsImdldERhdGEiLCJyZW1vdmUiLCJQcm9qZWN0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QWMsTUFBT2tCLFlBQWNZLEdBSWxELFlBQUFMLG1CQUFBLFNBQW1CakQsR0FEbkIsV0FFRWhDLEtBQUtnRixpQkFBbUJoRCxFQUFTd0QsUUFBTyxTQUFDbkMsR0FBTSxPQUFBQSxFQUFFMUQsU0FBVyxFQUFLQSxVQUNqRUssS0FBS3lGLGtCQUdQLFlBQUFBLGVBQUEsV0FDRSxJQUFNSixFQUFZckYsS0FBS0wsT0FBTSxpQkFDZE8sU0FBU0MsZUFBZWtGLEdBQ2hDSyxVQUFZLEdBQ25CLElBQXNCLFVBQUExRixLQUFLZ0YsaUJBQUwsZUFBakIsS0FBTTdCLEVBQU8sS0FDTixJQUFJd0MsRUFBWU4sRUFBUWxDLEtBS3RDLFlBQUErQixnQkFBQSxTQUFnQm5CLEdBQ1RBLEVBQU1hLGNBQWdELGVBQWhDYixFQUFNYSxhQUFhZ0IsTUFBTSxLQUlwRDdCLEVBQU1DLGlCQUNTaEUsS0FBS1EsUUFBUWdELGNBQWMsTUFDbkNxQyxVQUFVQyxJQUFJLGVBSXZCLFlBQUFWLFlBQUEsU0FBWXJCLEdBQ1ZBLEVBQU1DLGlCQUNOLElBQU1mLEVBQVljLEVBQU1hLGFBQWNtQixRQUFRLGNBQzlDaEUsRUFBZWlCLG9CQUFvQkMsRUFBV2pELEtBQUtMLFNBSXJELFlBQUF3RixpQkFBQSxTQUFpQnBCLEdBQ0EvRCxLQUFLUSxRQUFRZ0QsY0FBYyxNQUNuQ3FDLFVBQVVHLE9BQU8sY0FuQzFCLEdBRENwRixHLHVDQWdCRCxHQURDQSxHLG9DQVlELEdBRENBLEcsZ0NBUUQsR0FEQ0EsRyxxQ0FLSCxFQWpFQSxDQUNVLEdDSlMsSUFBSXFGLEVBQ0gsSUFBSUMsRUFBWTVHLEVBQWNvRCxRQUM1QixJQUFJd0QsRUFBWTVHLEVBQWM2RyxXIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBlbnVtIFByb2plY3RTdGF0dXMge1xuICBBY3RpdmUgPSAnYWN0aXZlJyxcbiAgRmluaXNoZWQgPSAnZmluaXNoZWQnLFxufVxuXG5leHBvcnQgY2xhc3MgUHJvamVjdCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBpZDogc3RyaW5nLFxuICAgIHB1YmxpYyB0aXRsZTogc3RyaW5nLFxuICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgIHB1YmxpYyBwZW9wbGU6IG51bWJlcixcbiAgICBwdWJsaWMgc3RhdHVzOiBQcm9qZWN0U3RhdHVzXG4gICkge31cbn1cbiIsInR5cGUgSG9zdFBvc2l0aW9uID0gJ2JlZm9yZWJlZ2luJyB8ICdhZnRlcmJlZ2luJyB8ICdiZWZvcmVlbmQnIHwgJ2FmdGVyZW5kJztcblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgRE9NQ29tcG9uZW50PFxuICBUIGV4dGVuZHMgSFRNTEVsZW1lbnQsXG4gIFUgZXh0ZW5kcyBIVE1MRWxlbWVudFxuPiB7XG4gIHRlbXBsYXRlRWxlbWVudDogSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgaG9zdEVsZW1lbnQ6IFQ7XG4gIGVsZW1lbnQ6IFU7XG4gIGhvc3RQb3NpdGlvbjogSG9zdFBvc2l0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHRlbXBsYXRlRWxJZDogc3RyaW5nLFxuICAgIGhvc3RFbElkOiBzdHJpbmcsXG4gICAgaG9zdFBvc2l0aW9uOiBIb3N0UG9zaXRpb24sXG4gICAgbmV3RWxJZD86IHN0cmluZ1xuICApIHtcbiAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgdGVtcGxhdGVFbElkXG4gICAgKSEgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgICB0aGlzLmhvc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaG9zdEVsSWQpIGFzIFQ7XG4gICAgdGhpcy5ob3N0UG9zaXRpb24gPSBob3N0UG9zaXRpb247XG4gICAgY29uc3QgbmV3Tm9kZSA9IGRvY3VtZW50LmltcG9ydE5vZGUodGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCwgdHJ1ZSk7XG4gICAgdGhpcy5lbGVtZW50ID0gbmV3Tm9kZS5maXJzdEVsZW1lbnRDaGlsZCBhcyBVO1xuICAgIGlmIChuZXdFbElkKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuaWQgPSBuZXdFbElkO1xuICAgIH1cblxuICAgIHRoaXMuYXR0YWNoKCk7XG4gIH1cblxuICBhYnN0cmFjdCBjb25maWd1cmUoKTogdm9pZDtcblxuICBhYnN0cmFjdCByZW5kZXJDb250ZW50KCk6IHZvaWQ7XG5cbiAgcHJpdmF0ZSBhdHRhY2goKSB7XG4gICAgdGhpcy5ob3N0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQodGhpcy5ob3N0UG9zaXRpb24sIHRoaXMuZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEF1dG9iaW5kKFxuICBfdGFyZ2V0OiBhbnksXG4gIF9tZXRob2ROYW1lOiBzdHJpbmcgfCBTeW1ib2wsXG4gIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvclxuKSB7XG4gIGNvbnN0IG5ld0Rlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvciA9IHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIGRlc2NyaXB0b3IudmFsdWUuYmluZCh0aGlzKTtcbiAgICB9LFxuICB9O1xuICByZXR1cm4gbmV3RGVzY3JpcHRvcjtcbn1cbiIsImludGVyZmFjZSBWYWxpZGF0YWJsZSB7XG4gIHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7XG4gIHJlcXVpcmVkPzogYm9vbGVhbjtcbiAgbWluTGVuZ3RoPzogbnVtYmVyO1xuICBtYXhMZW5ndGg/OiBudW1iZXI7XG4gIG1pblZhbD86IG51bWJlcjtcbiAgbWF4VmFsPzogbnVtYmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUoaW5wdXRWYWw6IFZhbGlkYXRhYmxlKSB7XG4gIGlmIChpbnB1dFZhbC5yZXF1aXJlZCAmJiBpbnB1dFZhbC52YWx1ZS50b1N0cmluZygpLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKFxuICAgIGlucHV0VmFsLm1pbkxlbmd0aCAhPSBudWxsICYmXG4gICAgdHlwZW9mIGlucHV0VmFsLnZhbHVlID09PSAnc3RyaW5nJyAmJlxuICAgIGlucHV0VmFsLnZhbHVlLnRyaW0oKS5sZW5ndGggPCBpbnB1dFZhbC5taW5MZW5ndGhcbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChcbiAgICBpbnB1dFZhbC5tYXhMZW5ndGggIT0gbnVsbCAmJlxuICAgIHR5cGVvZiBpbnB1dFZhbC52YWx1ZSA9PT0gJ3N0cmluZycgJiZcbiAgICBpbnB1dFZhbC52YWx1ZS50cmltKCkubGVuZ3RoID4gaW5wdXRWYWwubWF4TGVuZ3RoXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoXG4gICAgaW5wdXRWYWwubWluVmFsICE9IG51bGwgJiZcbiAgICB0eXBlb2YgaW5wdXRWYWwudmFsdWUgPT09ICdudW1iZXInICYmXG4gICAgaW5wdXRWYWwudmFsdWUgPCBpbnB1dFZhbC5taW5WYWxcbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChcbiAgICBpbnB1dFZhbC5tYXhWYWwgIT0gbnVsbCAmJlxuICAgIHR5cGVvZiBpbnB1dFZhbC52YWx1ZSA9PT0gJ251bWJlcicgJiZcbiAgICBpbnB1dFZhbC52YWx1ZSA+IGlucHV0VmFsLm1heFZhbFxuICApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cbiIsImltcG9ydCB7IFByb2plY3QsIFByb2plY3RTdGF0dXMgfSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XG5cbnR5cGUgTGlzdGVuZXI8VD4gPSAoaXRlbXM6IFRbXSkgPT4gdm9pZDtcblxuY2xhc3MgU3RhdGU8VD4ge1xuICBwcm90ZWN0ZWQgbGlzdGVuZXJzOiBMaXN0ZW5lcjxUPltdID0gW107XG5cbiAgYWRkTGlzdGVuZXIobGlzdGVuZXJGbjogTGlzdGVuZXI8VD4pIHtcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyRm4pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9qZWN0TWFuYWdlciBleHRlbmRzIFN0YXRlPFByb2plY3Q+IHtcbiAgcHJpdmF0ZSBwcm9qZWN0czogUHJvamVjdFtdID0gW107XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBQcm9qZWN0TWFuYWdlcjtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgaWYgKCF0aGlzLmluc3RhbmNlKSB7XG4gICAgICB0aGlzLmluc3RhbmNlID0gbmV3IFByb2plY3RNYW5hZ2VyKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XG4gIH1cblxuICBhZGRQcm9qZWN0KFxuICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgZGVzYzogc3RyaW5nLFxuICAgIHBlb3BsZTogbnVtYmVyLFxuICAgIHN0YXR1cz86IFByb2plY3RTdGF0dXNcbiAgKSB7XG4gICAgY29uc3QgbmV3UHJvamVjdCA9IG5ldyBQcm9qZWN0KFxuICAgICAgTWF0aC5yYW5kb20oKS50b1N0cmluZygpLFxuICAgICAgdGl0bGUsXG4gICAgICBkZXNjLFxuICAgICAgcGVvcGxlLFxuICAgICAgc3RhdHVzIHx8IFByb2plY3RTdGF0dXMuQWN0aXZlXG4gICAgKTtcbiAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3UHJvamVjdCk7XG4gICAgdGhpcy5wdWJsaXNoQ2hhbmdlcygpO1xuICB9XG5cbiAgcHVibGlzaENoYW5nZXMoKSB7XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lckZuIG9mIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lckZuKHRoaXMucHJvamVjdHMuc2xpY2UoKSk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUHJvamVjdFN0YXR1cyhwcm9qZWN0SWQ6IHN0cmluZywgbmV3U3RhdHVzOiBQcm9qZWN0U3RhdHVzKSB7XG4gICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdHMuZmluZCgocCkgPT4gcC5pZCA9PT0gcHJvamVjdElkKTtcbiAgICBpZiAoIXByb2plY3QgfHwgcHJvamVjdC5zdGF0dXMgPT09IG5ld1N0YXR1cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHByb2plY3Quc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgIHRoaXMucHVibGlzaENoYW5nZXMoKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcHJvamVjdE1hbmFnZXIgPSBQcm9qZWN0TWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuIiwiaW1wb3J0IERPTUNvbXBvbmVudCBmcm9tICcuLi9jb21wb25lbnRzL2Jhc2UnO1xuaW1wb3J0IEF1dG9iaW5kIGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQnO1xuaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tICcuLi91dGlsL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHsgcHJvamVjdE1hbmFnZXIgfSBmcm9tICcuLi9zdGF0ZS9wcm9qZWN0LW1hbmFnZW1lbnQnO1xuXG5leHBvcnQgY2xhc3MgUHJvamVjdEZvcm0gZXh0ZW5kcyBET01Db21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxGb3JtRWxlbWVudD4ge1xuICB0aXRsZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuICBkZXNjcmlwdGlvbklucHV0OiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBwZW9wbGVJbnB1dDogSFRNTElucHV0RWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigncHJvamVjdC1pbnB1dCcsICdhcHAnLCAnYWZ0ZXJiZWdpbicsICd1c2VyLWlucHV0Jyk7XG5cbiAgICB0aGlzLnRpdGxlSW5wdXQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJykhIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgdGhpcy5kZXNjcmlwdGlvbklucHV0ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnI2Rlc2NyaXB0aW9uJ1xuICAgICkgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICB0aGlzLnBlb3BsZUlucHV0ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnI3Blb3BsZSdcbiAgICApISBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgdGhpcy5jb25maWd1cmUoKTtcbiAgfVxuXG4gIHJlbmRlckNvbnRlbnQoKSB7XG4gICAgLy8gbm90aGluZyB0byBkb1xuICB9XG5cbiAgY29uZmlndXJlKCkge1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xuICB9XG5cbiAgQEF1dG9iaW5kXG4gIHByaXZhdGUgc3VibWl0SGFuZGxlcihldmVudDogRXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLmdhdGhlcklucHV0RGF0YSgpO1xuICAgIGlmICghZm9ybURhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBbdGl0bGUsIGRlc2MsIHBlb3BsZV0gPSBmb3JtRGF0YTtcbiAgICBwcm9qZWN0TWFuYWdlci5hZGRQcm9qZWN0KHRpdGxlLCBkZXNjLCBwZW9wbGUpO1xuICAgIHRoaXMucmVzZXRGb3JtKCk7XG4gIH1cblxuICBwcml2YXRlIGdhdGhlcklucHV0RGF0YSgpOiBbc3RyaW5nLCBzdHJpbmcsIG51bWJlcl0gfCB2b2lkIHtcbiAgICBjb25zdCBuZXdUaXRsZSA9IHRoaXMudGl0bGVJbnB1dC52YWx1ZTtcbiAgICBjb25zdCBuZXdEZXNjID0gdGhpcy5kZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICAgIGNvbnN0IG5ld1Blb3BsZSA9IHRoaXMucGVvcGxlSW5wdXQudmFsdWU7XG5cbiAgICBpZiAoXG4gICAgICAhdmFsaWRhdGUoeyB2YWx1ZTogbmV3VGl0bGUsIHJlcXVpcmVkOiB0cnVlIH0pIHx8XG4gICAgICAhdmFsaWRhdGUoeyB2YWx1ZTogbmV3RGVzYywgcmVxdWlyZWQ6IHRydWUgfSkgfHxcbiAgICAgICF2YWxpZGF0ZSh7IHZhbHVlOiArbmV3UGVvcGxlLCBtaW5WYWw6IDEsIG1heFZhbDogMTAgfSlcbiAgICApIHtcbiAgICAgIGFsZXJ0KCdJbnZhbGlkIHByb2plY3QuIFBsZWFzZSB0cnkgYWdhaW4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gW25ld1RpdGxlLCBuZXdEZXNjLCArbmV3UGVvcGxlXTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRGb3JtKCkge1xuICAgIHRoaXMudGl0bGVJbnB1dC52YWx1ZSA9ICcnO1xuICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9ICcnO1xuICAgIHRoaXMucGVvcGxlSW5wdXQudmFsdWUgPSAnJztcbiAgfVxufVxuIiwiaW1wb3J0IERPTUNvbXBvbmVudCBmcm9tICcuLi9jb21wb25lbnRzL2Jhc2UnO1xuaW1wb3J0IEF1dG9iaW5kIGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQnO1xuaW1wb3J0IHsgRHJhZ2dhYmxlIH0gZnJvbSAnLi4vbW9kZWxzL2RyYWctZHJvcCc7XG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnO1xuXG5leHBvcnQgY2xhc3MgUHJvamVjdEl0ZW1cbiAgZXh0ZW5kcyBET01Db21wb25lbnQ8SFRNTFVMaXN0RWxlbWVudCwgSFRNTExJRWxlbWVudD5cbiAgaW1wbGVtZW50cyBEcmFnZ2FibGUge1xuICBnZXQgY29udHJpYnV0b3JzKCkge1xuICAgIHJldHVybiBgJHt0aGlzLnByb2plY3QucGVvcGxlfSBjb250cmlidXRvciR7XG4gICAgICB0aGlzLnByb2plY3QucGVvcGxlID09PSAxID8gJycgOiAncydcbiAgICB9YDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGhvc3RFbElkOiBzdHJpbmcsIHByaXZhdGUgcHJvamVjdDogUHJvamVjdCkge1xuICAgIHN1cGVyKCdzaW5nbGUtcHJvamVjdCcsIGhvc3RFbElkLCAnYmVmb3JlZW5kJyk7XG5cbiAgICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcbiAgICB0aGlzLmNvbmZpZ3VyZSgpO1xuICB9XG5cbiAgY29uZmlndXJlKCkge1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdTdGFydEhhbmRsZXIpO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhpcy5kcmFnRW5kSGFuZGxlcik7XG4gIH1cblxuICByZW5kZXJDb250ZW50KCkge1xuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMicpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC50aXRsZTtcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDMnKSEudGV4dENvbnRlbnQgPSB0aGlzLmNvbnRyaWJ1dG9ycztcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigncCcpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC5kZXNjcmlwdGlvbjtcbiAgfVxuXG4gIEBBdXRvYmluZFxuICBkcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIhLnNldERhdGEoJ3RleHQvcGxhaW4nLCB0aGlzLnByb2plY3QuaWQpO1xuICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJztcbiAgfVxuXG4gIGRyYWdFbmRIYW5kbGVyKF9ldmVudDogRHJhZ0V2ZW50KSB7fVxufVxuIiwiaW1wb3J0IERPTUNvbXBvbmVudCBmcm9tICcuLi9jb21wb25lbnRzL2Jhc2UnO1xuaW1wb3J0IEF1dG9iaW5kIGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQnO1xuaW1wb3J0IHsgRHJhZ1RhcmdldCB9IGZyb20gJy4uL21vZGVscy9kcmFnLWRyb3AnO1xuaW1wb3J0IHsgUHJvamVjdCwgUHJvamVjdFN0YXR1cyB9IGZyb20gJy4uL21vZGVscy9wcm9qZWN0JztcbmltcG9ydCB7IFByb2plY3RJdGVtIH0gZnJvbSAnLi4vY29tcG9uZW50cy9wcm9qZWN0LWl0ZW0nO1xuaW1wb3J0IHsgcHJvamVjdE1hbmFnZXIgfSBmcm9tICcuLi9zdGF0ZS9wcm9qZWN0LW1hbmFnZW1lbnQnO1xuXG5leHBvcnQgY2xhc3MgUHJvamVjdExpc3RcbiAgZXh0ZW5kcyBET01Db21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxFbGVtZW50PlxuICBpbXBsZW1lbnRzIERyYWdUYXJnZXQge1xuICBhc3NpZ25lZFByb2plY3RzOiBQcm9qZWN0W10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgc3RhdHVzOiBQcm9qZWN0U3RhdHVzKSB7XG4gICAgc3VwZXIoJ3Byb2plY3QtbGlzdCcsICdhcHAnLCAnYmVmb3JlZW5kJywgYCR7c3RhdHVzfS1wcm9qZWN0c2ApO1xuXG4gICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XG4gICAgdGhpcy5jb25maWd1cmUoKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZSgpIHtcbiAgICBwcm9qZWN0TWFuYWdlci5hZGRMaXN0ZW5lcih0aGlzLmhhbmRsZVByb2plY3RBZGRlZCk7XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5kcmFnT3ZlckhhbmRsZXIpO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmRyYWdMZWF2ZUhhbmRsZXIpO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5kcm9wSGFuZGxlcik7XG4gIH1cblxuICByZW5kZXJDb250ZW50KCkge1xuICAgIGNvbnN0IGxpc3RJZCA9IGAke3RoaXMuc3RhdHVzfS1wcm9qZWN0cy1saXN0YDtcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuaWQgPSBsaXN0SWQ7XG5cbiAgICBjb25zdCB0aXRsZVRleHQgPSBgJHt0aGlzLnN0YXR1cy50b1VwcGVyQ2FzZSgpfSBQUk9KRUNUU2A7XG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJykhLnRleHRDb250ZW50ID0gdGl0bGVUZXh0O1xuICB9XG5cbiAgQEF1dG9iaW5kXG4gIGhhbmRsZVByb2plY3RBZGRlZChwcm9qZWN0czogUHJvamVjdFtdKSB7XG4gICAgdGhpcy5hc3NpZ25lZFByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKChwKSA9PiBwLnN0YXR1cyA9PT0gdGhpcy5zdGF0dXMpO1xuICAgIHRoaXMucmVuZGVyUHJvamVjdHMoKTtcbiAgfVxuXG4gIHJlbmRlclByb2plY3RzKCkge1xuICAgIGNvbnN0IGxpc3RJZCA9IGAke3RoaXMuc3RhdHVzfS1wcm9qZWN0cy1saXN0YDtcbiAgICBjb25zdCBsaXN0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXN0SWQpISBhcyBIVE1MVUxpc3RFbGVtZW50O1xuICAgIGxpc3RFbC5pbm5lckhUTUwgPSAnJzsgLy8gbm90IG9wdGltYWwsIGJ1dCBmaW5lIGZvciB0aGlzIHByb2plY3RcbiAgICBmb3IgKGNvbnN0IHByb2plY3Qgb2YgdGhpcy5hc3NpZ25lZFByb2plY3RzKSB7XG4gICAgICBjb25zdCBfID0gbmV3IFByb2plY3RJdGVtKGxpc3RJZCwgcHJvamVjdCk7XG4gICAgfVxuICB9XG5cbiAgQEF1dG9iaW5kXG4gIGRyYWdPdmVySGFuZGxlcihldmVudDogRHJhZ0V2ZW50KSB7XG4gICAgaWYgKCFldmVudC5kYXRhVHJhbnNmZXIgfHwgZXZlbnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdICE9PSAndGV4dC9wbGFpbicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpITtcbiAgICBsaXN0RWwuY2xhc3NMaXN0LmFkZCgnZHJvcHBhYmxlJyk7XG4gIH1cblxuICBAQXV0b2JpbmRcbiAgZHJvcEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgcHJvamVjdElkID0gZXZlbnQuZGF0YVRyYW5zZmVyIS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgcHJvamVjdE1hbmFnZXIudXBkYXRlUHJvamVjdFN0YXR1cyhwcm9qZWN0SWQsIHRoaXMuc3RhdHVzKTtcbiAgfVxuXG4gIEBBdXRvYmluZFxuICBkcmFnTGVhdmVIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcbiAgICBjb25zdCBsaXN0RWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSE7XG4gICAgbGlzdEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3BwYWJsZScpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQcm9qZWN0U3RhdHVzIH0gZnJvbSAnLi9tb2RlbHMvcHJvamVjdCc7XG5pbXBvcnQgeyBQcm9qZWN0Rm9ybSB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9qZWN0LWZvcm0nO1xuaW1wb3J0IHsgUHJvamVjdExpc3QgfSBmcm9tICcuL2NvbXBvbmVudHMvcHJvamVjdC1saXN0JztcblxuY29uc3QgX3Byb2pJbnB1dCA9IG5ldyBQcm9qZWN0Rm9ybSgpO1xuY29uc3QgX2FjdGl2ZUxpc3QgPSBuZXcgUHJvamVjdExpc3QoUHJvamVjdFN0YXR1cy5BY3RpdmUpO1xuY29uc3QgX2ZpbmlzaGVkTGlzdCA9IG5ldyBQcm9qZWN0TGlzdChQcm9qZWN0U3RhdHVzLkZpbmlzaGVkKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=